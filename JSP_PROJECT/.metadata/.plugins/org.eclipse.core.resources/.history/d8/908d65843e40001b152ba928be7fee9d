package util;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.Cookie;
import java.util.Map;
import java.net.URLEncoder;
import java.net.URLDecoder;
import java.io.IOException;
public class CookieBox {
 private Map<String, Cookie> cookieMap = new java.util.HashMap<String, Cookie>();

 public CookieBox(HttpServletRequest request) {
 Cookie[] cookies = request.getCookies();
 if (cookies != null) {
 for (int i = 0 ; i < cookies.length ; i++) {
 cookieMap.put(cookies[i].getName(), cookies[i]);
 }
 }
 }
 public static Cookie createCookie(String name, String value)
 throws IOException {
 return new Cookie(name, URLEncoder.encode(value, "utf-8"));
 }
 public static Cookie createCookie(String name, String value, String path,
 int maxAge) throws IOException {
 Cookie cookie = new Cookie(name, URLEncoder.encode(value, "utf-8"));
 cookie.setPath(path);
 cookie.setMaxAge(maxAge);
 return cookie;
 }
 public static Cookie createCookie(String name, String value, String domain,
 String path, int maxAge) throws IOException {
 Cookie cookie = new Cookie(name, URLEncoder.encode(value, "utf-8"));
 cookie.setDomain(domain);
 cookie.setPath(path);
 cookie.setMaxAge(maxAge);
 return cookie;
 }

 public Cookie getCookie(String name) {
 return cookieMap.get(name);
 }

 public String getValue(String name) throws IOException {
 Cookie cookie = cookieMap.get(name);
 if (cookie == null) {
 return null;
 }
 return URLDecoder.decode(cookie.getValue(), "utf-8");
 }
 public boolean exists(String name) {
 return cookieMap.get(name) != null;
 }
 //쿠키객체를 생성해주는 메소드 : 객체를 생성하지 않고도 사용할 수 있는 메소드로 정의 : static 멤버로 정의 
 // 이름 ,값을 가지고 Cookie객체생성
 public static Cookie createCookie(String name,String value) {
	 
	 Cookie cookie =new Cookie(name,value);
	 return cookie;
 }
 
 //이름 ,값,경로, 유지시간을 가지고  쿠키객체를 생성
public static  Cookie createCookie(String name,String value,String path,int maAage) {
	Cookie cookie = new Cookie(name, value);
	cookie.setPath(path);//경로설정
	cookie.setMaxAge(maxAge);
	return cookie;
	
	
}	
//이름 ,값,경로, 유지시간, 도메인을 가지고  쿠키객체를 생성
public static  Cookie createCookie(
	String name,
	String value,
	String path,
	String maxage,
	String domain) {
	
	
	Cookie cookie = new Cookie(name, value);
	cookie.setPath(path);//경로설정
	cookie.setMaxAge(maxage);
	return cookie;
	
	
}	 


 }
 
 
 
 
